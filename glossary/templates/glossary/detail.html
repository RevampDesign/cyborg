{% extends 'base.html' %}

{% block body_classes %}article{% endblock %}

{% block content %}
{% include 'partials/navigation/breadcrumbs.html' %}

<article class="article">
    <div class="grid-article">
        <div itemscope itemtype="https://schema.org/DefinedTerm">
            <header>
                <h1 itemprop="name">{{content.title}}</h1>
            </header>
            
            <div class="summary" itemprop="description">
                {{ content.summary|safe }}
            </div>
        </div>

        {% if content.sources or content.termsource_set.first %}
        <section id="sources" aria-labelledby="sources-headline">
            <h2 id="sources-headline">Sources</h2>
            {% if content.termsource_set.first %}
                {% for item in content.termsource_set.all %}
                    {% include 'glossary/partials/term-source.html' with item=item %}
                {% endfor %}
            {% endif %}

            {{ content.sources|safe }}
        </section>
        {% endif %}



        {% comment %}
        <aside id="article-outline">
            <h2>Outline</h2>
            <nav aria-label="Outline">
                <ul id="article-outline-content"></ul>
            </nav>
            <script>
            const outline = document.getElementById('article-outline-content');
            const content = document.querySelector('.article-content');
            
            function generateOutline(contentElement) {
              const headings = contentElement.querySelectorAll('h1, h2, h3, h4, h5, h6');
              if(headings.length > 0){
                    headings.forEach(heading => {
                        const outlineItem = document.createElement('li');
                        const anchor = document.createElement('a');
                        anchor.href = '#' + heading.id; // If headings have IDs
                        anchor.textContent = heading.textContent;
                        outlineItem.appendChild(anchor);
                        outlineItem.classList.add(heading.tagName.toLowerCase()); 
        
                        anchor.addEventListener('click', (event) => {
                            event.preventDefault();
                            heading.scrollIntoView({ behavior: 'smooth' });
                        });
        
                        outline.appendChild(outlineItem);
                    });
                }
                else {
                    const article = document.getElementById("blog-article");
                    const sidebar = document.getElementById("outline-sidebar");
                    article.classList.remove("justify-content-between");
                    article.classList.add("justify-content-center");
                    sidebar.classList.add("d-none");
                }
            }
            generateOutline(content);
            </script>
        </aside>
        {% endcomment %}

    </div>
</article>


{% endblock %}
