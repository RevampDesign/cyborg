
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Revelation of Halo | CYBORG_ Newsletter</title>
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    <!-- /FONTS -->

    <meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"/>

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Upgrade your humanity.">
    <meta name="twitter:description" content="An exploration of technology and systems and how they interact, dominate, or support our humanity.">
    <meta name="twitter:site" content="@NotDefinedTech">
    <meta name="twitter:image" content="https://cyborgnewsletter.com/static/social/cyborg-subscribe-gen.jpg">
    <meta name="twitter:creator" content="@NotDefinedTech">
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Upgrade your humanity.">
    <meta property="og:description" content="An exploration of technology and systems and how they interact, dominate, or support our humanity.">
    <meta property="og:url" content="https://cyborgnewsletter.com/">
    <meta property="og:site_name" content="CYBORG_ Newsletter">
    <meta property="og:image" content="https://cyborgnewsletter.com/static/social/cyborg-subscribe-gen.jpg">
    <meta property="og:image:secure_url" content="https://cyborgnewsletter.com/static/social/cyborg-subscribe-gen.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    
    <link rel="icon" href="/static/images/brand/favicon/cyborg.ico" sizes="32x32">

    
    <link rel="alternate" type="application/rss+xml" title="CYBORG_ Newsletter" href="/newsletters/feed/">

    
</head>
<body class="article">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JGP9HHYEJ7"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JGP9HHYEJ7');
    </script>

    
        <nav id="header">
    <a href="/">
        <div class="brand">
            <img src="/static/images/brand/logo-light.svg" alt="CYBORG" style="width: 120px;">
        </div>
    </a>

    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <label for="nav-toggle" class="nav-toggle-button">
        <span></span>
    </label>
    <div class="menu">
        <div class="navigation">
            <ul>
                <li>
                    <a href="/newsletters/" class="">Newsletters</a>
                </li>
                <li>
                    <a href="/topics/">Topics</a>
                </li>
            </ul>
        </div>
        <div class="action">
            <ul>
                <li>
                    <button id="open-search" class="btn" title="Open Search">
                        <svg viewBox="0 0 101 105" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M59.5 0C82.4198 0 101 18.5802 101 41.5C101 64.4198 82.4198 83 59.5 83C51.489 83 44.0096 80.7276 37.667 76.7959L10.751 104.461L0 94L26.543 66.7188C21.1861 59.7286 18 50.9871 18 41.5C18 18.5802 36.5802 0 59.5 0ZM59.5 15C44.8645 15 33 26.8645 33 41.5C33 56.1355 44.8645 68 59.5 68C74.1355 68 86 56.1355 86 41.5C86 26.8645 74.1355 15 59.5 15Z" fill="currentColor"/>
                        </svg>
                    </button>
                </li>
                <li>
                    <a href="/subscribe/" class="btn btn-primary">Subscribe <span class="cta-arrow"></span></a>
                </li>
            </ul>
        </div>
    </div>
</nav>
    
    
    <main id="main">
        
<ul class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
    <li itemprop="itemListElement" itemscope
    itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="/"><span itemprop="name">Home</span></a>&nbsp;/&nbsp;
        <meta itemprop="position" content="1" />
    </li>
    
    <li itemprop="itemListElement" itemscope
    itemtype="https://schema.org/ListItem">
        
        <a itemprop="item" href="/newsletters/"><span itemprop="name">Newsletters</span></a>&nbsp;/&nbsp;
        
        <meta itemprop="position" content="2" />
    </li>
    
    The Revelation of Halo
</ul>

<article class="article" itemscope itemtype="https://schema.org/Article">
    <meta itemprop="name" content="">
    
    <meta itemprop="description" content="How the wildly popular game, Halo: Combat Evolved, is even more relevant today than you ever thought.">
    
    <meta itemprop="datePublished" content="2025-10-28T00:45:03Z">
    <div itemprop="author" itemscope itemtype="https://schema.org/Person">
        <meta itemprop="name" content="Jess Brown">
    </div>


    <div class="grid-article">
        <header>

            <div itemprop="isPartOf" itemscope itemtype="https://schema.org/PublicationIssue" itemid="#issue">
                <div itemscope itemtype="https://schema.org/Periodical" itemid="#periodical">
                    <meta itemprop="name" content="CYBORG_ Newsletter">
                    <meta itemprop="id" href="https://cyborgnewsletter.com/#periodical">
                </div>
                <div itemprop="copyrightHolder" itemscope itemtype="https://schema.org/Organization">
                    <meta itemprop="name" content="Not Defined LLC">
                </div>
                <div itemprop="isPartOf" itemscope itemtype="https://schema.org/PublicationVolume">
                    <link itemprop="isPartOf" href="https://cyborgnewsletter.com/#periodical" />
                    <meta itemprop="volumeNumber" content="96">
                </div>
            </div>
            
            <div class="publish-date" style="text-align: right;">October 28, 2025</div>
            <h1 itemprop="headline">The Revelation of Halo</h1>
        </header>
        
        <div id="article-body" class="article-content" itemprop="articleBody">
            <p>The light of the projector overhead flickers to life in the previously pitch-black room. I'm gripping a cold plastic handle, finger resting immediately on a trigger. My sister is wrapped up in a huge blanket and we're both surrounded with pillows. Choral music begins to play from the surround-sound speakers and the huge screen in front of us displays the logo that first showed me how cool typography (specifically custom type) could be:</p>
<p><cite>Halo: Combat Evolved</cite></p>
<p>It's a silly thing, but it's one of my favorite experiences growing up. Playing this intense alien-shooter game in our parents' super scary basement with my best friend is about the most nostalgic thing I can think of.</p>
<p>Surprisingly enough, this game has a <em>lot</em> to do with themes we've been exploring in CYBORG_ recently: horror, <a href="https://cyborgnewsletter.com/newsletters/the-deadly-65th-floor-dinner-party/"><cite>Alien</cite></a> (the movie franchise), <a href="https://cyborgnewsletter.com/newsletters/the-most-subtle-ai-movie-ever/">religion + technology</a>, <a href="https://cyborgnewsletter.com/newsletters/the-apocalypse-is-here/">monstrosity</a>, <a href="https://cyborgnewsletter.com/newsletters/do-you-ever-feel-like-you-are-being-watched/">artificial intelligence</a> (AI), and <a href="https://cyborgnewsletter.com/newsletters/the-artist-as-enemy-part-one/">art</a>. The game bleeds into our reality, not just through concepts and ideas, but the central AI character, Cortana, was the design inspiration for <a href="https://en.wikipedia.org/wiki/Cortana_(virtual_assistant)">Microsoft's personal assistant</a> (2009-2023) and in my opinion a <em>fantastic</em> marketing ploy.</p>
<p>Secure your suits and load your ammo, this is gonna go deep...space.</p>
<h2>Nihilism</h2>
<p>For a game with such in-your-face Christian names (Halo, The Covenant, The Flood, Master Chief), the actual feeling is an almost nihilistic, empty hopelessness. This is perhaps a poetic reflection of outer space itself, which is the setting of the game. While the &quot;last frontier&quot; is beautiful, inspiring, and full of potential, it also holds deeply disturbing horrors. I'm talking about actual horrors: being stranded in space is probably the most helpless you could possibly be. Then of course, we can thank imaginative horrors like the <cite>Alien</cite> franchise to fill in the potential things to be found in the vast, real universe. Who knows if there are other life formsâ€”or diseasesâ€”out there that could interrupt or discontinue our current reality if found and brought to earth?</p>
<p>The game pops us right into the middle of some kind of galactic struggle. We're awakened from a cryogenic sleep in response to our ship being boarded by the hostile multi-species alien alliance called The Covenant. At first, there's not much that we know besides, &quot;Me have gun, they have gun, start shooting.&quot;</p>
<p>The religious themes start to develop even further as we start putting together the larger story pieces. There's a whole history of an ideological conflict between two ancient species that ends up producing the conflict we're engaged in: The Forerunners vs. The Flood. The Covenant believe they are the successors to the Forerunners (who are now extinct), and have fanatically taken up &quot;The Mantle&quot; to be the caretakers of the universe. But to understand any of this, we first have to make it to the ring-world, Halo.</p>
<p>&quot;Whoever controls Halo controls the fate of the universe,&quot; Cortana, our AI companion, informs us. We are led to believe that Halo is simply a weapon that the Covenant plan to use against humans. Not so! Halo is actually a fail-safe that will eradicate all sentient life in the worst-case scenario that The Flood (another alien force) get loose. The Covenant aliens are prepared to sacrifice all livesâ€”theirs, ours, and almost everything elseâ€”in order to starve the Flood into extinction. </p>
<p>Here's where this gets interesting.</p>
<p>The Flood is a zombie-like forceâ€”technically separate entities, but also controlled and connected as if it were one organism. We first see the Flood emerge when the game goes from fun alien-shooter to horror-survivalâ€“shooter. Tons of little aliens start to swarm and when they find corpses of any kind or other temporarily live characters, they infect the bodies and turn them into grotesque zombies that then attack you.</p>
<p>This surprise mid-way through the game introduces the nihilism that pervades the lore. It's no longer just aliens vs. humans, because the Flood is voracious and makes no distinction between food options. There are times throughout the game series that humans team up with Covenant forces against the Flood. Ultimately, it feels hopeless and pointless, because the Flood just keeps coming. They multiply with every fallen soldier and sometimes reanimate their own corpses.</p>
<p>It's a true <a href="https://cyborgnewsletter.com/newsletters/the-apocalypse-is-here/">Romero-style zombie</a> in which you are forced to face an ever-growing crowd. Individuals may not be hard to get rid of, but the true power comes in the masses. The Flood is the perfect name for this forceâ€”unstoppable, uncontrollable, and continuously expandingâ€”and of course it pulls in more Biblical references. The Flood is destruction, and except for some ancient speculative technologies, there is no deliverance.</p>
<p>Trapped in a war with forces greater than any individual, history longer than generations, and never-ending swarms of foes, every bit of meaning eventually falls away and survival takes the place of any other concerns. This aspect of the game feels like our current political situation in the U.S.: decisions, fanaticism, and ideologies that are larger than just you or me are playing out a conflict that we both do and do not impact. The social and political systems continue on as if they are cosmic beings clashing and destroying parts of our realities at different times.</p>
<h2>Limbo</h2>
<p>As I brushed up on the lore for Halo, I realized something about the game's environmental design that was validated in a video about <a href="https://www.youtube.com/watch?v=f_TTXYOC8SE">why Halo is so creepy</a>: it's full of liminal spaces.</p>
<figure>
    <img src="https://embed.filekitcdn.com/e/iDKTPNXrEJsYXUT7GCu1J3/nzxGJr51FNcos4FecH3PRm/email" alt="">
    <figcaption>An empty room filtering into a shorter hallway in a brutalist-style concrete environment.
    </figcaption>
</figure>
<p>We end up exploring various environments that are devoid of life aside from the Covenant or Flood. Technically even the plant life in the &quot;outside&quot; areas of the Halo ring-world is contrived. The whole world is constructed, not necessarily natural. Then when we explore the deep architecture beneath the surface, we find ourselves in spaces that can feel very tight, or extremely vast.</p>
<figure>
    <img src="https://embed.filekitcdn.com/e/iDKTPNXrEJsYXUT7GCu1J3/2HnWiKEjec1re242t6yhdB/email" alt="">
    <figcaption>More concrete-like walls and floors, but this hallway is eerily tall.
    </figcaption>
</figure>
<p>&quot;Liminal spaces&quot; here includes a sense of dread that is felt in spaces that are &quot;in-between.&quot; In a way, this is the &quot;monstrous&quot; side of architecture. Humans tend to consider other humans or things that break categories as monsters. Zombies, for example, are human, but also not human. They're alive even though they're supposed to be dead. Same with liminal spaces. Those spooky hallways in hotels or the dark and stuffy stairwells that take you to a parking lot are spaces that exist as connections, not destinations. They're places, but they're uncomfortableâ€”especially when they're empty, no one around but you (as far as you can tell).</p>
<p>Halo uses these liminal space environments to great effect. Tight interconnected and repeating hallways increase the dread as you take every turn just waiting for the jump scare you know is going to show at some point. Vast spaces don't remove the dread either, because they can suddenly fill with the Flood, chasing you down as if in a nightmare where you run and run, but respite is always still farther ahead.</p>
<h2>The Ultimate Betrayal</h2>
<p>While trying to work out what's going on, kill enemies, and save your own skin, there's one aspect of the story that has been subtly hiding in plain sight. AI has been a part of our journey every step of the way (literally, since Cortana gets ported into our helmet and speaks to us intermittently as we play). Halfway through the game (at the same time we start learning about the Flood), we get separated from Cortana as she gets put into the Halo Control Center and alerts us to go save some fellow humans. That's where we meet 343 Guilty Spark (I'll call him the Monitor from here on out). The Monitor is an AI housed in a box-like case that can float and teleport. </p>
<p>The whole game to this point, we have been given no hint that AI can't be trusted. So when the Monitor tells us how to activate Halo's defenses to stop the Flood, we go right along with it. Just as we are about to activate the literal kill-switch, Cortana re-emerges from the control center terminal and stops us, revealing the truth of what we were about to do. Finally, the Monitor admits the consequences of its instructions:</p>
<blockquote>
<p>&quot;Technically this installation pulse has a maximum effective radius of 25,000 lightyears but once the others follow suit, this galaxy will be quite devoid of lifeâ€”or at least any life with sufficient biomass to sustain the Flood, but you already knew that. I mean, how couldn't you?...We have followed outbreak containment procedure to the letter. You were with me each step of the way as we managed this crisis.&quot;</p>
</blockquote>
<p>Initially understood as a benign guardian of the ancient technology of Halo, the Monitor has been revealed as having less-than-transparent motives at best, at worst it is a maniacal AI bent on destroying all sentient life (and it proceeds to try and kill you for the rest of the game, so...).</p>
<p>The Flood was the first big surprise of this game, and this sudden betrayal was the second. The game was released in 2001, so from my experience of feeling like computers were trustworthy machines that would guide humanity to all things good, having an AI antagonist was deeply disconcerting. However, this clearly reflects realities that are now playing out in real-world AI. Motivations may not be the right word, but incentives certainly apply to the behavior of AI models. Incentives are driving the development of the models (felt by the companies creating them) and incentives drive the models' output (the more you engage is likely the &quot;reward&quot; that an AI model is seeking).</p>
<p>AI is not an impartial arbiter of truth and goodness. Not in the game, not in real life, and hopefully not ever.</p>
<p>In a way, the artificial intelligences in the game feel like manifestations of that original ancient conflict: The Forerunner alien civilization with its own priorities and values against human civilization with our priorities and values. Cortana is a hero in her own right throughout the game series and even tugs on heartstrings as you develop a relationship with her. The Monitor with its agenda manipulates us and hinders our progress. Even now, it's tough for me to refer to Cortana as an &quot;it&quot; instead of a &quot;her,&quot; demonstrating how much of a relationship we developed, even knowing it's a game.</p>
<p>The seemingly innocent themes of our relationship to/with AI in these games is uncomfortable to me now that our current reality has given us these very opportunities. So, in a way, Halo has taught me an important lesson about AI: trust must be earned, but it is a fragile thing. </p>
<p>In real life, my current opinion is to avoid any possibility of forming a &quot;relationship&quot; with AI. The risks are not even close to the possible benefits. AI is ultimately a manifestation of its creator's contextâ€”it inherits traits, biases, and agendas as a result of its creation, and that alone is enough to dissuade me from putting any kind of real trust in it. If a company is incentivized (as they currently all are) to maximize our engagement with their AI models, it doesn't matter how friendly, how heroic and Cortana-like the model appears, it simply cannot have your best interest &quot;at heart&quot; because it is trying to keep you in relationship to itself.</p>
<p>We have not yet created Cortanas, all we have at present are Monitorsâ€”friendly faces on black boxes.</p>
<h2>Cyborg</h2>
<p>This nostalgic game turned out to be much deeper than I thought. It explores so much of how technology impacts our actual lives. Something as simple as the design of a building can impact our mood or our feeling of safety, as we saw in the liminal spaces exploiting our dread in the game.</p>
<p>The interesting thing about the Christian-religious themes throughout the game is that humans aren't really a part of it, aside from your character acting as a savior figure. You could map the idea of a cosmic struggle between good and evil onto the Forerunner/Covenant vs. Flood conflict...and yet, humans just get in the way in the minds of the Covenant. Is it really good vs. evil? When you can't see yourself in a religious mythology, it changes everything. Although The Flood pose an actual threat to all life, does the religious story imposed on the threat <em>really</em> justify the violent genocide and suicide?</p>
<p>AI pulling the strings as an over-arching plot device is another aspect that reaches deeply into our fears. Apparently having a &quot;human in the loop,&quot; simply isn't enough if AI can avoid being transparent about its guidance. </p>
<p>We are as easily manipulated by machines as we are by ideologies and religious fanaticism. When misunderstandings are codified into religious rites and traditions, it becomes very difficult to sort out what is true and what is moral. We see this bleeding into the rhetoric and opinions about our technology in the real world (I would include politics as a part of that &quot;technology&quot;).</p>
<figure>
<blockquote>
<p>...the aliens see the Forerunners as gods, and fancy themselves to be their successors. Since the Forerunners were able to build the Halo installations, it is safe to assume they were a highly advanced species. The fact that the Covenant holds the technology left behind by this ancient civilisation to be sacred might mean that it is in fact technology itself they are worshipping.</p>
</blockquote>
<figcaption>â€”<a href="https://www.mdpi.com/2077-1444/9/4/126">The Dark of the Covenant</a>, by P.C.J.M. (Jarell) Paulissen (2018), Tilburg School of Catholic Theology</figcaption>
</figure>
<p>In a world full of paradoxes, it's important to continuously check in with yourself: what are my values? Am I living in harmony with those values? How can I work to see the humanity in those around meâ€”especially those who are in-between or don't fit my preferred categories of human?</p>
<p>Instead of raising our blasters against monsters, we should look for ways to dismantle the desire to demonize found within ourselves.</p>
        </div>

        <div class="rail">
            <aside id="article-outline">
                <h2>Outline</h2>
                <nav aria-label="Outline">
                    <ul id="article-outline-content"></ul>
                </nav>
                <script>
                const outline = document.getElementById('article-outline-content');
                const content = document.querySelector('.article-content');
                
                function generateOutline(contentElement) {
                const headings = contentElement.querySelectorAll('h1, h2, h3, h4, h5, h6');
                if(headings.length > 0){
                        headings.forEach(heading => {
                            const outlineItem = document.createElement('li');
                            const anchor = document.createElement('a');
                            anchor.href = '#' + heading.id; // If headings have IDs
                            anchor.textContent = heading.textContent;
                            outlineItem.appendChild(anchor);
                            outlineItem.classList.add(heading.tagName.toLowerCase()); 
            
                            anchor.addEventListener('click', (event) => {
                                event.preventDefault();
                                heading.scrollIntoView({ behavior: 'smooth' });
                            });
            
                            outline.appendChild(outlineItem);
                        });
                    }
                    else {
                        const article = document.getElementById("blog-article");
                        const sidebar = document.getElementById("outline-sidebar");
                        article.classList.remove("justify-content-between");
                        article.classList.add("justify-content-center");
                        sidebar.classList.add("d-none");
                    }
                }
                generateOutline(content);
                </script>
            </aside>

            
            
            <aside id="glossary">
                <h2>Glossary</h2>
                <nav aria-label="Outline">
                    <ul id="article-glossary-content">
                    
                        
                        
                        <li><a href="/glossary/religion/">Religion&nbsp;&rsaquo;</a></li>
                        
                    
                    </ul>
                </nav>
            </aside>
            
        </div>
    </div>
</article>

<div class="linked-articles">
    
    <div id="the-deadly-65th-floor-dinner-party" class="link-preview" popover>
        <a href="/newsletters/the-deadly-65th-floor-dinner-party/">
            <div class="card">
                <div class="card-body">
                    <h2>The Deadly 65th Floor Dinner Party</h2>
                    <div></div>
                    <div class="date"><small>September 23, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
    <div id="the-most-subtle-ai-movie-ever" class="link-preview" popover>
        <a href="/newsletters/the-most-subtle-ai-movie-ever/">
            <div class="card">
                <div class="card-body">
                    <h2>The Most Subtle AI Movie Ever?</h2>
                    <div>Do you ever feel like you&#x27;re being watched? What if everything you ever did or said was being recorded, and after you die, someone watches it all?</div>
                    <div class="date"><small>August 26, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
    <div id="the-apocalypse-is-here" class="link-preview" popover>
        <a href="/newsletters/the-apocalypse-is-here/">
            <div class="card">
                <div class="card-body">
                    <h2>The Apocalypse Is Here</h2>
                    <div>What do zombies and the apocalypse have to do with society in the 21st century? Let&#x27;s put it this way: there&#x27;s more than one creature looking for your brain.</div>
                    <div class="date"><small>May 6, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
    <div id="do-you-ever-feel-like-you-are-being-watched" class="link-preview" popover>
        <a href="/newsletters/do-you-ever-feel-like-you-are-being-watched/">
            <div class="card">
                <div class="card-body">
                    <h2>Do You Ever Feel Like You&#x27;re Being Watched?</h2>
                    <div>Who is experimenting on whom? The dangers of AI, especially as it gets more integrated, more skilled, and more intelligent.</div>
                    <div class="date"><small>September 2, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
    <div id="the-artist-as-enemy-part-one" class="link-preview" popover>
        <a href="/newsletters/the-artist-as-enemy-part-one/">
            <div class="card">
                <div class="card-body">
                    <h2>The Artist as Enemy, Part One</h2>
                    <div>How artists help people understand what&#x27;s really going on around us all.</div>
                    <div class="date"><small>September 30, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
    <div id="the-apocalypse-is-here" class="link-preview" popover>
        <a href="/newsletters/the-apocalypse-is-here/">
            <div class="card">
                <div class="card-body">
                    <h2>The Apocalypse Is Here</h2>
                    <div>What do zombies and the apocalypse have to do with society in the 21st century? Let&#x27;s put it this way: there&#x27;s more than one creature looking for your brain.</div>
                    <div class="date"><small>May 6, 2025</small></div>
                </div>
            </div>
        </a>
    </div>
    
</div>

<div class="linked-terms">
    
</div>




    </main>
    
    
    <footer>
        <div class="row">
            <div class="copyright">
                &copy; 2026 Not Defined LLC. All rights reserved.
            </div>
            <div class="policies">
                <a href="/policies/artificial-intelligence/">AI Policy</a>
            </div>
        </div>
        <div class="row">
            <div class="attribution">
                Designed, developed, and written with ðŸŒˆ by Jess Brown.
            </div>
        </div>
    </footer>
    

    
    
    <dialog id="search-modal">
            <div class="modal-header">
                <h2>Search</h2>
                <form method="dialog">
                    <button class="btn btn-close" title="Close">&times;</button>
                </form>
            </div>
            
            <input type="search" id="search-input" placeholder="What are you looking for?" autocomplete="off">
            <div class="modal-body">
                <div id="docfind-results"></div>
            </div>
    </dialog>
    <script defer>
        const searchModal = document.getElementById('search-modal');
        const openBtn = document.getElementById('open-search');
        const searchInput = document.getElementById('search-input');

        // Open modal
        openBtn.addEventListener('click', () => {
            searchModal.showModal();
            // Auto-focus the input when it opens
            searchInput.focus();
        });

        // Optional: Close modal if user clicks outside the content box (on the backdrop)
        searchModal.addEventListener('click', (e) => {
            if (e.target === searchModal) searchModal.close();
        });
    </script>
    

    


    <script src="/static/js/scripts.js" defer></script>

    
    <script type="module">
    import search from '/static/search/docfind.js';

    const input = document.getElementById('search-input');
    const resultsDiv = document.getElementById('docfind-results');

    function escapeHTML(str) {
        if (!str) return "";
        return str.replace(/[&<>"']/g, function(m) {
            return {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#39;'
            }[m];
        });
    }

    function debounce(func, timeout = 300) {
        let timer;
        return (...args) => {
            clearTimeout(timer);
            timer = setTimeout(() => { func.apply(this, args); }, timeout);
        };
    }

    async function performSearch(query) {
        if (query.length < 2) {
            resultsDiv.innerHTML = '';
            return;
        }

        resultsDiv.innerHTML = '<p>Searching...</p>';

        // The 'search' function returns an array of matching documents
        const results = await search(query);

        if (results.length === 0) {
            resultsDiv.innerHTML = `
                <div class="no-results">
                    <p>No newsletters found matching "<strong>${escapeHTML(query)}</strong>".</p>
                </div>
            `;
            return;
        }
        
        resultsDiv.innerHTML = results.map(res => {
            const safeTitle = escapeHTML(res.title);
            const safeHref = encodeURI(res.href);
            
            // 1. Extract the tags from the body string
            // We split by the "Tags:" prefix you added in Django
            let displayBody = res.body || "";
            let tags = [];
            
            if (displayBody.includes("Tags: ")) {
                const parts = displayBody.split("Tags: ");
                displayBody = parts[0]; // Everything before "Tags:"
                tags = parts[1].split(", "); // Everything after "Tags:", split into an array
            }

            const safeBody = escapeHTML(displayBody.substring(0, 150));

            // 2. Build the Tags HTML
            const tagsHTML = tags.length > 0 
                ? `<div class="result-tags">
                    ${tags.map(tag => `<span class="chip">${escapeHTML(tag)}</span>`).join('')}
                </div>`
                : '';

            return `
                <div class="search-result">
                    <a href="${safeHref}">
                        <h3>${safeTitle}</h3>
                    </a>
                    <p>${safeBody}...</p>
                    ${tagsHTML}
                </div>
            `;
        }).join('');
    }

    const processChange = debounce((e) => performSearch(e.target.value));
    input.addEventListener('input', processChange);
</script>

    
<script defer>
document.addEventListener('DOMContentLoaded', () => {
    const article = document.getElementById("article-body");
    const newsletterLinks = article.querySelectorAll('a[href^="/newsletters/"]');

    newsletterLinks.forEach(link => {
        link.classList.add("link-with-preview");
        // Get slug
        const url = link.getAttribute('href');
        const slugMatch = url.match(/\/newsletters\/([^/]+)\/$/);
        if (slugMatch && slugMatch[1]) {
            link.setAttribute('data-popover-target', slugMatch[1])
        }
    });
    
    // Must search within article body only, since there are glossaryLinks in the aside, now.
    const glossaryLinks = article.querySelectorAll('a[href^="/glossary/"]');

    glossaryLinks.forEach(link => {
        link.classList.add("link-with-preview");
        const termUrl = link.getAttribute('href');
        const termSlugMatch = termUrl.match(/\/(glossary)\/([^/]+)\/$/);
        if (termSlugMatch && termSlugMatch[1]) {
            link.setAttribute('data-popover-target', (termSlugMatch[1] + '-' + termSlugMatch[2]))
        }
    });



  const links = document.querySelectorAll('.link-with-preview');

  links.forEach(link => {
    const popoverId = link.getAttribute('data-popover-target');
    const popover = document.getElementById(popoverId);
    const popoverAnchor = '--' + popoverId;

    // Have to override the anchor-name/position-anchor so that each link uniquely positions the preview (otherwise it all goes to the last one)
    link.style.anchorName = popoverAnchor;
    popover.style.positionAnchor = popoverAnchor;

    if (popover) {
      link.addEventListener('mouseenter', () => {
        popover.showPopover();
      });

      link.addEventListener('mouseleave', () => {
        popover.hidePopover();
      });
    }
  });
});
</script>


</body>
</html>